{"version":3,"sources":["../../../../server/components/cmeasy/cmeasy.model.integration.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;yBAIO,WAAW;;;;wBACX,UAAU;;;;oBACb,MAAM;;;;sBACT,QAAQ;;;;;;;AAJtB,IAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAU9B,QAAQ,CAAC,4BAA4B,EAAE,YAAW;;AAEhD,MAAI,YAAY,CAAC;AACjB,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;AAGnB,UAAQ,CAAC,+BAA+B,EAAE,YAAW;AACnD,UAAM,CAAC,mBAAmB,CAAC,CAAC;AAC5B,SAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAE,CAAC,iCAAiC,EAAE,UAAS,IAAI,EAAE;AACnD,UAAI,WAAW,GAAG,oBAAE,KAAK,CAAC,YAAY,EAAE,kBAAkB,EAAE,CAAC,CAAC;AAC9D,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,IAAI,CAAC,gCAAgC,CAAC,CACtC,IAAI,CAAC,WAAW,CAAC,CACjB,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;AACrE,aAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;AACzE,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC,CAAC;;AAIH,UAAQ,CAAC,8BAA8B,EAAE,YAAW;AAClD,UAAM,CAAC,mBAAmB,CAAC,CAAC;AAC5B,SAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAE,CAAC,8BAA8B,EAAE,UAAS,IAAI,EAAE;AAChD,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,iCAAiC,GAAG,YAAY,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,CAClF,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;AACtE,aAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC1E,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GAEJ,CAAC,CAAC;;AAGH,UAAQ,CAAC,8BAA8B,EAAE,YAAW;AAClD,UAAM,CAAC,YAAM;AACX,aAAO,mBAAmB,EAAE,CACzB,IAAI,CAAC,mBAAmB,CAAC,CACzB,IAAI,CAAC,mBAAmB,CAAC,CACzB,IAAI,CAAC,mBAAmB,CAAC,CACzB,IAAI,CAAC,mBAAmB,CAAC,CAAC;KAC9B,CAAC,CAAC;AACH,SAAK,CAAC,sBAAsB,CAAC,CAAC;AAC9B,MAAE,CAAC,kCAAkC,EAAE,UAAS,IAAI,EAAE;AACpD,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,gCAAgC,CAAC,CACrC,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAChC,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GAEJ,CAAC,CAAC;;;;;;AAOH,WAAS,mBAAmB,GAAG;AAC7B,WAAO,MAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AAC/B,aAAO,0BAAY,UAAC,OAAO,EAAG;AAC5B,eAAO,4BAAQ,GAAG,CAAC,CAChB,IAAI,CAAC,gCAAgC,CAAC,CACtC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAC1B,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,sBAAY,GAAG,GAAG,CAAC,IAAI,CAAC;AACxB,iBAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SACnB,CAAC,CAAC;OACN,CAAC,CAAA;KACH,CAAC,CAAC;GACJ;;;;;;AAMD,WAAS,mBAAmB,GAAE;AAC5B,WAAO,MAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AAC/B,aAAO,0BAAY,UAAC,OAAO,EAAG;AAC5B,eAAO,4BAAQ,GAAG,CAAC,UACV,CAAC,iCAAiC,GAAG,YAAY,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,CACrF,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,iBAAO,EAAE,CAAC;SACX,CAAC,CAAC;OACN,CAAC,CAAA;KACH,CAAC,CAAC;GACJ;;;;;;AAMD,WAAS,sBAAsB,GAAE;AAC/B,WAAO,MAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AAC/B,aAAO,0BAAY,UAAC,OAAO,EAAG;AAC5B,oCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,gCAAgC,CAAC,CACrC,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,iBAAO,sBAAQ,GAAG,CAEhB,yBAAE,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,UAAC,IAAI,EAAK;AACxB,mBAAO,0BAAY,UAAC,OAAO,EAAE,OAAO,EAAK;AACvC,0CAAQ,GAAG,CAAC,UACH,CAAC,iCAAiC,GAAG,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,CAC7E,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,oBAAG,GAAG,EAAC;AACL,yBAAO,EAAE,CAAC;iBACX,MACI;AACH,yBAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;iBACnB;eACF,CAAC,CAAC;aACN,CAAC,CAAC;WACJ,CAAC,CAAC,KAAK,EAAE,CAEX,CAAC,IAAI,CAAC,UAAC,GAAG,EAAG;AAAC,mBAAO,OAAO,CAAC,GAAG,CAAC,CAAC;WAAC,CAAC,CAAC;SAEvC,CAAC,CAAC;OACN,CAAC,CAAA;KACH,CAAC,CAAC;GACJ;;;;;;AAMD,WAAS,kBAAkB,GAAE;AAC3B,WAAO;AACL,WAAK,EAAE,kBAAkB,GAAG,kBAAK,EAAE,EAAE;AACrC,aAAO,EAAE,oBAAoB,GAAG,kBAAK,EAAE,EAAE;KAC1C,CAAA;GACF;CAGF,CAAC,CAAC;;;;;;;AASH,QAAQ,CAAC,4BAA4B,EAAE,YAAW;;AAEhD,MAAI,YAAY,CAAC;;AAEjB,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;AAGnB,UAAQ,CAAC,+BAA+B,EAAE,YAAW;AACnD,UAAM,CAAC,mBAAmB,CAAC,CAAC;AAC5B,SAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAE,CAAC,iCAAiC,EAAE,UAAS,IAAI,EAAE;AACnD,UAAI,WAAW,GAAG,oBAAE,KAAK,CAAC,YAAY,EAAE,kBAAkB,EAAE,CAAC,CAAC;AAC9D,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,IAAI,CAAC,gCAAgC,CAAC,CACtC,IAAI,CAAC,WAAW,CAAC,CACjB,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;AACrE,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC,CAAC;;AAGH,UAAQ,CAAC,8BAA8B,EAAE,YAAW;AAClD,UAAM,CAAC,mBAAmB,CAAC,CAAC;AAC5B,SAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAE,CAAC,8BAA8B,EAAE,UAAS,IAAI,EAAE;AAChD,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,iCAAiC,GAAG,YAAY,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAC1E,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;AACtE,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC,CAAC;;AAGH,UAAQ,CAAC,qDAAqD,EAAE,YAAW;AACzE,UAAM,CAAC,YAAM;AACX,aAAO,mBAAmB,EAAE,CACzB,IAAI,CAAC,mBAAmB,CAAC,CACzB,IAAI,CAAC,mBAAmB,CAAC,CAAC;KAC9B,CAAC,CAAC;AACH,SAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAE,CAAC,0CAA0C,EAAE,UAAS,IAAI,EAAE;AAC5D,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,gCAAgC,CAAC,CACrC,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAChC,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC,CAAC;;AAEH,UAAQ,CAAC,6DAA6D,EAAE,YAAW;AACjF,UAAM,CAAC,YAAM;AACX,aAAO,mBAAmB,EAAE,CACzB,IAAI,CAAC,mBAAmB,CAAC,CACzB,IAAI,CAAC,mBAAmB,CAAC,CACzB,IAAI,CAAC,mBAAmB,CAAC,CAAC;KAC9B,CAAC,CAAC;AACH,SAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAE,CAAC,0CAA0C,EAAE,UAAS,IAAI,EAAE;AAC5D,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,iDAAiD,CAAC,CACtD,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAChC,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC,CAAC;;AAEH,UAAQ,CAAC,qDAAqD,EAAE,YAAW;AACzE,SAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAE,CAAC,8BAA8B,EAAE,UAAS,IAAI,EAAE;AAChD,YAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,oCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,iCAAiC,GAAG,UAAU,CAAC,CACnD,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,aAAG,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;AAClE,cAAI,EAAE,CAAC;SACR,CAAC,CAAC;OACN,CAAC,CAAC;KACJ,CAAC,CAAC;GAEJ,CAAC,CAAC;;;;;;AAOH,WAAS,mBAAmB,GAAG;AAC7B,WAAO,MAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AAC/B,aAAO,0BAAY,UAAC,OAAO,EAAG;AAC5B,eAAO,4BAAQ,GAAG,CAAC,CAChB,IAAI,CAAC,gCAAgC,CAAC,CACtC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAC1B,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,sBAAY,GAAG,GAAG,CAAC,IAAI,CAAC;AACxB,iBAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SACnB,CAAC,CAAC;OACN,CAAC,CAAA;KACH,CAAC,CAAC;GACJ;;;;;;AAMD,WAAS,mBAAmB,GAAE;AAC5B,WAAO,MAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AAC/B,aAAO,0BAAY,UAAC,OAAO,EAAG;AAC5B,eAAO,4BAAQ,GAAG,CAAC,UACV,CAAC,iCAAiC,GAAG,YAAY,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAC7E,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,iBAAO,EAAE,CAAC;SACX,CAAC,CAAC;OACN,CAAC,CAAA;KACH,CAAC,CAAC;GACJ;;;;;;AAMD,WAAS,kBAAkB,GAAE;AAC3B,WAAO;AACL,WAAK,EAAE,uBAAuB,GAAG,kBAAK,EAAE,EAAE;KAC3C,CAAA;GACF;CAGF,CAAC,CAAC","file":"cmeasy.model.integration.js","sourcesContent":["'use strict';\n\n\nvar cmeasy = require('../..');\nimport request from 'supertest';\nimport Promise from 'bluebird';\nimport uuid from 'uuid';\nimport _ from 'lodash';\n\n\n/**\n *\n */\ndescribe('Cmeasy blogPost model API:', function() {\n\n  var blogPostItem;\n  this.timeout(6000);\n\n\n  describe('POST /api/v1/content/blogPost', function() {\n    before(createDummyBlogPost);\n    after(deleteDummyBlogPost);\n    it('should create a blog post entry', function(done) {\n      var newBlogPost = _.merge(blogPostItem, getDefaultBlogPost());\n      cmeasy.then(function(app) {\n        request(app)\n          .post('/admin/api/v1/content/blogPost')\n          .send(newBlogPost)\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.title.toString().should.equal(newBlogPost.title.toString());\n            res.body.content.toString().should.equal(newBlogPost.content.toString());\n            done();\n          });\n      });\n    });\n  });\n\n\n\n  describe('GET /api/v1/content/blogPost', function() {\n    before(createDummyBlogPost);\n    after(deleteDummyBlogPost);\n    it('should get a blog post entry', function(done) {\n      cmeasy.then(function(app) {\n        request(app)\n          .get('/admin/api/v1/content/blogPost/' + blogPostItem._cmeasyInstanceId.toString())\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.title.toString().should.equal(blogPostItem.title.toString());\n            res.body.content.toString().should.equal(blogPostItem.content.toString());\n            done();\n          });\n      });\n    });\n\n  });\n\n\n  describe('GET /api/v1/content/blogPost', function() {\n    before(() => {\n      return createDummyBlogPost()\n        .then(createDummyBlogPost)\n        .then(createDummyBlogPost)\n        .then(createDummyBlogPost)\n        .then(createDummyBlogPost);\n    });\n    after(deleteAllDummyBlogPost);\n    it('should get a all blog post entry', function(done) {\n      cmeasy.then(function(app) {\n        request(app)\n          .get('/admin/api/v1/content/blogPost')\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.length.should.equal(5);\n            done();\n          });\n      });\n    });\n\n  });\n\n\n  /**\n   *\n   * @returns {*}\n   */\n  function createDummyBlogPost() {\n    return cmeasy.then(function(app) {\n      return new Promise((success)=>{\n        return request(app)\n          .post('/admin/api/v1/content/blogPost')\n          .send(getDefaultBlogPost())\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            blogPostItem = res.body;\n            success(res.body);\n          });\n      })\n    });\n  }\n\n  /**\n   *\n   * @returns {*}\n   */\n  function deleteDummyBlogPost(){\n    return cmeasy.then(function(app) {\n      return new Promise((success)=>{\n        return request(app)\n          .delete('/admin/api/v1/content/blogPost/' + blogPostItem._cmeasyInstanceId.toString())\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            success();\n          });\n      })\n    });\n  }\n\n  /**\n   *\n   * @returns {*}\n   */\n  function deleteAllDummyBlogPost(){\n    return cmeasy.then(function(app) {\n      return new Promise((success)=>{\n        request(app)\n          .get('/admin/api/v1/content/blogPost')\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            return Promise.all(\n\n              _(res.body).map((item) => {\n                return new Promise((success, failure) => {\n                  request(app)\n                    .delete('/admin/api/v1/content/blogPost/' + item._cmeasyInstanceId.toString())\n                    .expect(200)\n                    .expect('Content-Type', /json/)\n                    .end((err, res) => {\n                      if(err){\n                        failure();\n                      }\n                      else {\n                        success(res.body);\n                      }\n                    });\n                });\n              }).value()\n\n            ).then((res)=>{return success(res);});\n\n          });\n      })\n    });\n  }\n\n  /**\n   *\n   * @returns {{title: string, content: string}}\n   */\n  function getDefaultBlogPost(){\n    return {\n      title: 'Test blog title ' + uuid.v4(),\n      content: 'Test blog content ' + uuid.v4()\n    }\n  }\n\n\n});\n\n\n\n/**\n *\n * Singleton item\n *\n */\ndescribe('Cmeasy homePage model API:', function() {\n\n  var homePageItem;\n\n  this.timeout(6000);\n\n\n  describe('POST /api/v1/content/homePage', function() {\n    before(createDummyHomePage);\n    after(deleteDummyHomePage);\n    it('should create a home page entry', function(done) {\n      var newHomePage = _.merge(homePageItem, getDefaultHomePage());\n      cmeasy.then(function(app) {\n        request(app)\n          .post('/admin/api/v1/content/homePage')\n          .send(newHomePage)\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.title.toString().should.equal(newHomePage.title.toString());\n            done();\n          });\n      });\n    });\n  });\n\n\n  describe('GET /api/v1/content/homePage', function() {\n    before(createDummyHomePage);\n    after(deleteDummyHomePage);\n    it('should get a home page entry', function(done) {\n      cmeasy.then(function(app) {\n        request(app)\n          .get('/admin/api/v1/content/homePage/' + homePageItem._cmeasyId.toString())\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.title.toString().should.equal(homePageItem.title.toString());\n            done();\n          });\n      });\n    });\n  });\n\n\n  describe('GET /api/v1/content/homePage with multiple versions', function() {\n    before(() => {\n      return createDummyHomePage()\n        .then(createDummyHomePage)\n        .then(createDummyHomePage);\n    });\n    after(deleteDummyHomePage);\n    it('should only get a single home page entry', function(done) {\n      cmeasy.then(function(app) {\n        request(app)\n          .get('/admin/api/v1/content/homePage')\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.length.should.equal(1);\n            done();\n          });\n      });\n    });\n  });\n\n  describe('GET /api/v1/content/homePage history with multiple versions', function() {\n    before(() => {\n      return createDummyHomePage()\n        .then(createDummyHomePage)\n        .then(createDummyHomePage)\n        .then(createDummyHomePage);\n    });\n    after(deleteDummyHomePage);\n    it('should only get a single home page entry', function(done) {\n      cmeasy.then(function(app) {\n        request(app)\n          .get('/admin/api/v1/content/homePage/homePage/history')\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.length.should.equal(4);\n            done();\n          });\n      });\n    });\n  });\n\n  describe('GET /api/v1/content/homePage without prior instance', function() {\n    after(deleteDummyHomePage);\n    it('should get a home page entry', function(done) {\n      cmeasy.then(function(app) {\n        request(app)\n          .get('/admin/api/v1/content/homePage/' + 'homePage')\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            res.body.title.toString().should.equal('Default Home Page Title');\n            done();\n          });\n      });\n    });\n\n  });\n\n\n  /**\n   *\n   * @returns {*}\n   */\n  function createDummyHomePage() {\n    return cmeasy.then(function(app) {\n      return new Promise((success)=>{\n        return request(app)\n          .post('/admin/api/v1/content/homePage')\n          .send(getDefaultHomePage())\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            homePageItem = res.body;\n            success(res.body);\n          });\n      })\n    });\n  }\n\n  /**\n   *\n   * @returns {*}\n   */\n  function deleteDummyHomePage(){\n    return cmeasy.then(function(app) {\n      return new Promise((success)=>{\n        return request(app)\n          .delete('/admin/api/v1/content/homePage/' + homePageItem._cmeasyId.toString())\n          .expect(200)\n          .expect('Content-Type', /json/)\n          .end((err, res) => {\n            success();\n          });\n      })\n    });\n  }\n\n  /**\n   *\n   * @returns {{title: string, content: string}}\n   */\n  function getDefaultHomePage(){\n    return {\n      title: 'Test home page title ' + uuid.v4()\n    }\n  }\n\n\n});\n"]}