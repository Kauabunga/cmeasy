{"version":3,"sources":["../../../../server/components/render-index/render-index.integration.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;yBAIO,WAAW;;;;wBACX,UAAU;;;;oBACb,MAAM;;;;sBACT,QAAQ;;;;uBACF,SAAS;;;;;;;AAL7B,IAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAU9B,QAAQ,CAAC,mBAAmB,EAAE,YAAW;;AAEvC,IAAE,CAAC,sDAAsD,EAAE,UAAS,IAAI,EAAE;AACxE,UAAM,CAAC,IAAI,CAAC,UAAS,GAAG,EAAE;AACxB,kCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,QAAQ,CAAC,CACb,MAAM,CAAC,GAAG,CAAC,CACX,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;;AAEjB,YAAI,CAAC,GAAG,qBAAQ,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;AAE/B,YAAI,uBAAuB,GAAG,CAAC,CAAC,0BAA0B,CAAC,CAAC;AAC5D,YAAI,iBAAiB,GAAG,uBAAuB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;;;AAGxE,+BAAuB,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;AAE/C,yBAAiB,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;;AAG/D,yBAAiB,CAAC,OAAO,CAAC,mDAAmD,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEpG,YAAI,EAAE,CAAC;OACR,CAAC,CAAC;KACN,CAAC,CAAC;GACJ,CAAC,CAAC;CAEJ,CAAC,CAAC","file":"render-index.integration.js","sourcesContent":["'use strict';\n\n\nvar cmeasy = require('../..');\nimport request from 'supertest';\nimport Promise from 'bluebird';\nimport uuid from 'uuid';\nimport _ from 'lodash';\nimport cheerio from 'cheerio';\n\n/**\n *\n */\ndescribe('Render index api:', function() {\n\n  it('Should inject variables into the index.template.html', function(done) {\n    cmeasy.then(function(app) {\n      request(app)\n        .get('/admin')\n        .expect(200)\n        .end((err, res) => {\n\n          var $ = cheerio.load(res.text);\n\n          var injectedVariablesScript = $('#cmeasyInjectedVariables');\n          var injectedVariables = injectedVariablesScript.get(0).children[0].data;\n\n          //Ensure there is only a single injected script\n          injectedVariablesScript.length.should.equal(1);\n\n          injectedVariables.indexOf('\"env\":\"test\"').should.not.equal(-1);\n\n          //TODO smarter regex to test _cmeasyId\":{ ..... blogPost ..... }\n          injectedVariables.indexOf('\"_cmeasyId\":{\"type\":\"String\",\"default\":\"blogPost\"').should.not.equal(-1);\n\n          done();\n        });\n    });\n  });\n\n});\n\n\n"]}